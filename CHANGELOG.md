# CHANGELOG

## [Beta5] - 2025-8-11

### Fixed
* Attacks were not applying threat correctly

## [Beta5] - 2025-8-11

### ‚ú® Gameplay Improvements

* **Smarter detection of actions and spells:** The system now better identifies when an action comes from an item, skill, spell, weapon, or feat.
* **Custom threat per item and actor:** You can now set specific threat values for items or abilities, and the system will use these instead of the global ones.
* **New ‚Äúreduce‚Äù mode:** If an action is configured as reduce threat instead of apply, it will, certainly, reduce the threat based on normal calculations.

### üõ† Threat Calculation Adjustments

* **More accurate application of immunity, resistance, and weakness modifiers:** Immunities and resistances now reliably block threat, while weaknesses proportionally increase it.

### üß† Event Detection and Handling

* **Improved HP tracking:** The script now more consistently stores and updates hit points before damage or healing is applied.
* **Better support for different action types:** It now correctly responds to attacks, spells, healing, saving throws, and skill maneuvers.

### üêõ Fixes

* Prevents applying threat when the target is immune to the action.
* Fixes inconsistencies when calculating threat for repeated skill actions.
* Resolves cases where threat was applied twice for the same event.
* Added missing localization

## [Beta4] - 2025-8-7
### Taunts
‚úÖ New taunt threat calculation based on:
- Action-relevant traits
- Action slug (demoralize, etc.)
- Bonuses for result (success, critical success) and traits
- TauntBase added as a separately configurable setting.

### Heals
- Revised calculation of threat generated by healing:
- The preHP of the healed target is obtained..

### Spellcasting
üîÑ Improved spell detection:
- Correctly detects spellSlug and rank.
- Ignores spells with the healing trait.

### Attacks and Maneuvers
- Improved detection of skill attacks and new, more comprehensive skill checks.
- Threat adjustment by result (failure, success, critical success)
- Support for modifying threat with resistances, vulnerabilities, and immunities.


# Fixed
- NonGMs cannot update threat menu, how could i didnt get this before? i dont know

## [Beta3] - 2025-8-2

New Features
* Non-offensive spells now generates threat plus spells generate threat to all creatures in combat
* All Effects from Compendium.pf2e.equipment-effects, Compendium.pf2e.feat-effects and Compendium.pf2e.spell-effects are parsed (might revisit every single one of them to set the correct values)

Fixed
* Saving module configuration actually works
* Floating Panel position configuration
* Vulnerabilities by trait option now shows the document

## [Beta2.1] - 2025-8-1
* Automated Releases by @ChasarooniZ in https://github.com/ZzinnerGamer/pf2e-threat-tracker/pull/1
* Actually support for non skill actions

## [beta2] - 2025-8-1
UPDATE YAY

Now we have this:

- Remove threat increase per check outcome for threat increase from damage dealt:
Now if a spell or weapon attack deals damage to a target, the threat is calculated based on the whole damage dealt instead of grade of success.

- Support for offensive skill-checks:
Maneuvers like trip, shove, grapple, disarm, etc. now generate threat, even though they are not standard attack-rolls.

- Full handling of skill-attack:
Added suppor for skill actions. A new threat calculation based on the skill outcome (failure, success, etc.) and the actor's level.

- Dynamic distance-based threat multiplier:
A new function adjusts generated threat based on the distance between the source token and enemies. Applies to attacks, healing, and taunts.

- New setting: decayFactor:
Determine how quickly threat values converge towards the average each round. 0 forces all threats to equalize to the average, 1 applies decay only without additional convergence.

---
**_Special_**
BATTLECRY! IS OUT AND GUARDIAN IS COMPATIBLE WITH THIS WOOOHOOO

- Add Guardian class actions


## [beta1] - 2025-7-29
Initial release
